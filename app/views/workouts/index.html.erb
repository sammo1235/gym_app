<div class="flex justify-center">
  <div class="flex m-2 px-4 py-4 rounded shadow bg-white">
    <% if @user.avatar.attached? %>
      <%= image_tag @user.avatar.variant(resize: "250x250") %>
    <% else %>
      <%= image_tag 'green', size: "250x250" %>
    <% end %>
  </div>  

  <div class="flex m-2 px-8 py-6 rounded shadow bg-white">
    <div class="flex flex-col justify-evenly">
      <div class="font-bold">
        <%= @user.username %>
      </div>

      <div class="">
        Rank: <%= @user.rank %>
      </div>

      <div class="">
        Sex: <%= @user.gender %>
      </div>

      <div class="">
        Age: <%= @user.age %>
      </div>

      <div class="">
        Best Wilks: <%= @user.best_wilks %>
      </div>

      <div class="">
        Total Workouts: <%= @user.workouts.count %>
      </div>
      
      <div class="">
        Date Joined: <%= @user.created_at.to_date %>
      </div>
    </div>
  </div>
</div>

<div class="flex justify-evenly md:w-auto m-2 px-8 py-2 rounded shadow bg-white">
  <div class="font-bold">
    1RM PBs
  </div>
  <div>
    Squat: <%= @best_squat %>Kg
  </div>
  <div>
    Bench: <%= @best_bench %>Kg
  </div>
  <div>
    Deadlift: <%= @best_deadlift %>Kg
  </div>
</div>

<div class="flex justify-evenly m-2 px-8 py-2 rounded shadow bg-white">
  <div class="font-bold">
    Projected PBs
  </div>
  <div>
    Squat: <%= @best_projected_squat %>Kg
  </div>
  <div>
    Bench: <%= @best_projected_bench %>Kg
  </div>
  <div>
    Deadlift: <%= @best_projected_deadlift %>Kg
  </div>
</div>

<div class="flex flex-row">
  <%= render 'sett_volume_history' %>
  <%= render 'wilks_history' %>
</div>

<div class="flex flex-row">
  <%= render 'workout_volume_history' %>
  <%= render 'one_rep_max_history' %>
</div>

<div class="flex flex-row">
  <div class="m-2 px-8 py-6 rounded shadow bg-white w-1/2">
    <div class="font-medium">
      Workouts
    </div>
    <table class="w-full leading-10">
      <thead class="text-left border-b">
        <tr class="pb-1">
          <th>Type</th>
          <th>Sets</th>
          <th>Volume</th>
          <th>Date</th>
        </tr>
      </thead>

      <tbody>
        <% @workouts.each do |workout| %>
          <tr>
            <td><%= link_to workout.prepared_variant, user_workout_path(@user, workout), class: "hover:text-gray-500" %></td>
            <td><%= workout.setts.count %></td>
            <td><%= workout.total_workload %></td>
            <td><%= workout.created_at.to_date %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div class="m-2 px-8 py-6 rounded shadow bg-white w-1/2">
    <div class="font-medium">
      Sets
    </div>
    <table class="w-full leading-10">
      <thead class="text-left border-b">
        <tr class="pb-1">
          <th>Lift</th>
          <th>Weight</th>
          <th>Reps</th>
          <th>Volume</th>
          <th>Date</th>
        </tr>
      </thead>

      <tbody>
        <% @setts.each do |sett| %>
          <tr>
            <td><%= sett.lift.name %></td>
            <td><%= sett.weight %></td>
            <td><%= sett.reps %></td>
            <td><%= sett.workload %></td>
            <td><%= sett.created_at.to_date %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<% if current_user == @user %>
  <div class="flex justify-center mt-4">
    <%= link_to 'New Work Out', new_user_workout_path, class: "inline-block bg-blue-500 hover:bg-blue-600 text-white rounded shadow cursor-pointer font-bold px-3 py-2" %>
  </div>
<% end %>